<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" 
          content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Sample3 </title>
</head>
<body>
<label><span id="nums">0</span>件が選択されています。</label>
<hr/>
<div id="container">

</div>

<script>
    /** チェックされている個数 */
    var count = 0;

    function onChecked(val) {
        // チェックされているか
        if(!!val.checked) {
            count++;
        }else{
            count--;
        }

        var nums = document.getElementById("nums");
        nums.innerText = count;
    }

    /** 画面がロードされた際に呼び出される関数 */
    window.onload = function () {
        // ID "container"を取得
        var container = document.getElementById("container");

        // 5件のチェックボックスを作成
        for (i = 1; i <= 5; i++) {
            // "innerHTML"に代入することで、チェックボックスを追加
            // container.innerHTML += 
            //       "<input id='check_"+ i 
            //     +"' type='checkbox' onchange='onChecked(this)'/>"
            //     + "<label for='check_" + i + "'>チェックボックス"
            //     + i + "</label>"
            //     + "<br/>";
            
            // JavaScriptのコードを使用して要素(DOM)を生成
            var newInput = document.createElement("input");
            newInput.setAttribute("type", "checkbox");
            newInput.id = "check_" + i; 

            newInput.onclick = onChecked.bind(null, newInput);

            var newLabel = document.createElement("label");
            newLabel.setAttribute("for", "check_" +i);

            var labelText = document.createTextNode("チェックボックス" + i);
            newLabel.appendChild(labelText);

            container.appendChild(newInput);
            container.appendChild(newLabel);
            container.appendChild(document.createElement("br"));
        }
    }

</script>
</body>
</html>